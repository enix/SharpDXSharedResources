This is a 'one file' example of a combined direct 2D and direct 3D shared texture.

The code is ported from / based on a SlimDX sample you can find here: http://www.aaronblog.us/?p=36